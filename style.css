/* style.css */
/* === Apple Music Style Design System === */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
:root {
--bg-app: #ffffff;
--bg-sidebar: rgba(245, 245, 247, 0.7);
--bg-glass: rgba(255, 255, 255, 0.85);
--text-primary: #1c1c1e;
--text-secondary: #8e8e93;
--text-tertiary: #d1d1d6;

--accent-color: #fa233b; 
--accent-hover: #d41e32;

--border-color: rgba(0, 0, 0, 0.05);
--divider-color: rgba(0, 0, 0, 0.05);

--hover-bg: rgba(0, 0, 0, 0.04);
--active-item-bg: #e5e5ea;

--radius-s: 8px;
--radius-m: 12px;
--radius-l: 18px;

--shadow-sm: 0 2px 8px rgba(0,0,0,0.04);
--shadow-md: 0 8px 24px rgba(0,0,0,0.12);

--font-family: -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;

--sidebar-width: 260px;
--player-height: 84px;

}
 * {
   box-sizing: border-box;
   margin: 0;
   padding: 0;
   user-select: none;
   -webkit-font-smoothing: antialiased;
   }
body {
font-family: var(--font-family);
color: var(--text-primary);
background-color: var(--bg-app);
overflow: hidden;
height: 100vh;
font-size: 13px;
line-height: 1.4;
}
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #d1d1d6; border-radius: 4px; border: 2px solid transparent; background-clip: content-box; }
::-webkit-scrollbar-thumb:hover { background: #b0b0b6; background-clip: content-box; }

.app-container { display: flex; height: 100vh; width: 100%; }

/* === Sidebar === */
.sidebar {
width: var(--sidebar-width); background: var(--bg-sidebar);
backdrop-filter: saturate(180%) blur(20px); -webkit-backdrop-filter: saturate(180%) blur(20px);
border-right: 1px solid var(--border-color);
display: flex; flex-direction: column; padding: 30px 0 100px 0;
flex-shrink: 0; z-index: 50;
}
.sidebar-header { padding: 0 24px 24px; display: flex; align-items: center; gap: 12px; }
.logo-container { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; }
.app-logo { width: 100%; height: 100%; object-fit: contain; border-radius: 8px; }
.sidebar-header span { font-size: 18px; font-weight: 700; letter-spacing: -0.5px; line-height: 1; }
.scrollable-menu { overflow-y: auto; flex: 1; padding: 0 16px; }
.menu-group { margin-bottom: 24px; }
.menu-label, .menu-label-row {
padding: 0 12px 8px; font-size: 11px; color: var(--text-secondary);
font-weight: 600; text-transform: uppercase; display: flex; justify-content: space-between; align-items: center; letter-spacing: 0.05em;
}
.menu-item {
padding: 10px 12px; cursor: pointer; display: flex; align-items: center; gap: 12px;
color: var(--text-primary); font-weight: 500; border-radius: var(--radius-s);
transition: background 0.2s; margin-bottom: 2px;
}
.menu-item i { width: 20px; text-align: center; color: var(--accent-color); font-size: 14px; }
.menu-item:hover { background: var(--hover-bg); }
.menu-item.active { background: var(--active-item-bg); color: var(--text-primary); font-weight: 600; }
.icon-btn-small {
background: none; border: none; cursor: pointer; color: var(--text-secondary); width: 24px; height: 24px;
border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: background 0.2s;
}
.icon-btn-small:hover { background: rgba(0,0,0,0.05); color: var(--accent-color); }

/* === Main Content === */
.main-content { flex: 1; display: flex; flex-direction: column; background: var(--bg-app); overflow: hidden; position: relative; }
.top-bar { height: 64px; display: flex; align-items: center; justify-content: space-between; padding: 0 32px; flex-shrink: 0; z-index: 40; }
.top-bar.glass { background: rgba(255,255,255,0.8); backdrop-filter: saturate(180%) blur(20px); -webkit-backdrop-filter: saturate(180%) blur(20px); position: sticky; top: 0; }
.search-wrapper {
background: rgba(0,0,0,0.05); border-radius: 8px; padding: 8px 12px;
display: flex; align-items: center; width: 260px; gap: 10px; color: var(--text-secondary); transition: all 0.2s;
}
.search-wrapper:focus-within { background: #fff; box-shadow: 0 0 0 1px var(--accent-color), 0 2px 8px rgba(0,0,0,0.05); color: var(--accent-color); }
.search-wrapper input { border: none; background: transparent; outline: none; width: 100%; font-family: inherit; font-size: 13px; color: var(--text-primary); }

/* 修复：Top Bar Actions 布局 */
.actions {
display: flex; align-items: center; gap: 12px; flex-shrink: 0;
}
.btn-text-action {
background: none; border: none; color: var(--accent-color); font-weight: 600; 
font-size: 14px; cursor: pointer; padding: 6px 10px; border-radius: 6px;
transition: background 0.2s;
}
.btn-text-action:hover { background: rgba(250, 35, 59, 0.08); }
.btn-primary {
background: transparent; color: var(--accent-color); border: none; padding: 6px 16px; cursor: pointer; font-weight: 600; font-size: 13px;
display: flex; align-items: center; gap: 6px; border-radius: 6px; transition: background 0.2s;
}
.btn-primary:hover { background: rgba(250, 35, 59, 0.08); }

/* === Song List === */
.content-view { flex: 1; overflow-y: auto; padding: 0 0 100px 0; }
.view-header { padding: 24px 32px 10px; display: flex; flex-direction: column; gap: 4px; }
.view-header h1 { font-size: 30px; font-weight: 700; letter-spacing: -0.5px; }
#song-count { font-size: 13px; color: var(--text-secondary); font-weight: 500; }
.song-table-header {
display: grid; grid-template-columns: 30px 40px 4fr 3fr 3fr 60px 50px;
padding: 10px 32px; border-bottom: 1px solid var(--divider-color);
color: var(--text-secondary); font-weight: 500; font-size: 12px;
position: sticky; top: 0; background: var(--bg-app); z-index: 10;
}
.song-item {
display: grid; grid-template-columns: 30px 40px 4fr 3fr 3fr 60px 50px;
padding: 10px 32px; align-items: center; border-bottom: 1px solid var(--divider-color);
font-size: 13px; border-radius: 6px; margin: 0 16px; transition: background 0.1s;
}
.hidden-col { visibility: hidden; }
.song-item:hover { background: var(--hover-bg); }
.song-item.active { background: rgba(250, 35, 59, 0.05); }
.song-item.active .col-title { color: var(--accent-color); }
.song-item.active .col-index { color: var(--accent-color); opacity: 1; font-weight: 700; }
.col-index { color: var(--text-secondary); opacity: 0.5; font-size: 11px; }
.col-title { font-weight: 600; color: var(--text-primary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.col-artist, .col-album { color: var(--text-secondary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.col-time { color: var(--text-secondary); font-variant-numeric: tabular-nums; font-size: 12px;}
.col-actions button {
background: none; border: none; cursor: pointer; color: var(--text-secondary);
padding: 4px; font-size: 14px; opacity: 0; transition: opacity 0.2s;
}
.song-item:hover .col-actions button { opacity: 1; }
.col-actions button:hover { color: var(--accent-color); }
.col-select input[type="checkbox"] {
appearance: none; width: 16px; height: 16px; border: 1px solid #d1d1d6; border-radius: 50%; cursor: pointer; display: grid; place-content: center;
}
.col-select input[type="checkbox"]::before { content: ""; width: 8px; height: 8px; transform: scale(0); transition: 120ms transform ease-in-out; box-shadow: inset 1em 1em #fff; transform-origin: center; clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%); }
.col-select input[type="checkbox"]:checked { background-color: var(--accent-color); border-color: var(--accent-color); }
.col-select input[type="checkbox"]:checked::before { transform: scale(1); }

/* === Batch Bar === */
.batch-bar {
position: fixed; bottom: 0; left: 0; width: 100%; height: 60px;
background: #fff; box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
z-index: 250; display: flex; justify-content: space-between; align-items: center;
padding: 0 40px; transform: translateY(0); transition: transform 0.3s;
}
.batch-bar.hidden { transform: translateY(100%); }
.batch-info { display: flex; gap: 20px; align-items: center; font-weight: 600; color: var(--text-primary); }
.btn-text-link { background: none; border: none; color: var(--accent-color); font-weight: 500; cursor: pointer; }
.batch-actions { display: flex; gap: 12px; }
.btn-batch { padding: 8px 16px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; background: #f2f2f7; color: var(--text-primary); display: flex; align-items: center; gap: 8px; }
.btn-batch:hover { background: #e5e5ea; }
.btn-batch.delete { color: var(--accent-color); background: rgba(250, 35, 59, 0.1); }
.btn-batch.cancel { background: var(--text-primary); color: #fff; }

/* === Mini Player Bar === */
.player-bar {
height: var(--player-height); width: 100%; position: fixed; bottom: 0; left: 0;
display: flex; align-items: center; justify-content: space-between; padding: 0 32px;
z-index: 100; border-top: 1px solid rgba(0,0,0,0.05); cursor: pointer; transition: background 0.2s;
}
.player-bar.glass { background: var(--bg-glass); backdrop-filter: saturate(180%) blur(20px); -webkit-backdrop-filter: saturate(180%) blur(20px); }
.player-bar:hover { background: #fff; }
.mini-progress-track { position: absolute; top: -2px; left: 0; width: 100%; height: 2px; z-index: 101; cursor: pointer; }
.mini-progress-track input[type=range] { height: 2px; }
.mini-progress-track input[type=range]::-webkit-slider-thumb { opacity: 0; }
.mini-progress-track:hover input[type=range]::-webkit-slider-thumb { opacity: 1; transform: scale(1.5); }
.player-info { display: flex; align-items: center; width: 30%; gap: 14px; }
.cover-art { width: 48px; height: 48px; background: #f0f0f5; color: #d1d1d6; display: flex; align-items: center; justify-content: center; font-size: 20px; border-radius: 6px; box-shadow: var(--shadow-sm); flex-shrink: 0; background-size: cover; background-position: center; }
.track-details { display: flex; flex-direction: column; overflow: hidden; justify-content: center; }
.track-name { font-weight: 600; font-size: 13px; color: var(--text-primary); }
.track-artist { font-size: 12px; color: var(--text-secondary); margin-top: 2px; }
.player-controls-container { flex: 1; display: flex; justify-content: center; }
.control-buttons { display: flex; align-items: center; gap: 24px; }
.ctrl-btn { background: none; border: none; cursor: pointer; font-size: 20px; color: var(--text-primary); transition: transform 0.1s, color 0.2s; display: flex; align-items: center; justify-content: center; }
.ctrl-btn:hover { color: var(--accent-color); }
.play-pause-btn { background: var(--text-primary); color: #fff; width: 36px; height: 36px; border-radius: 50%; font-size: 14px; box-shadow: 0 4px 10px rgba(0,0,0,0.15); }
.play-pause-btn:hover { background: var(--accent-color); color: #fff; transform: scale(1.05); }
.player-extras { width: 30%; display: flex; justify-content: flex-end; align-items: center; gap: 16px; }
.volume-control { display: flex; align-items: center; gap: 10px; width: 120px; }
.volume-control input { width: 100%; }

/* === Full Screen Player === */
.full-player-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 200; display: flex; flex-direction: column; align-items: center; transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); transform: translateY(0); overflow: hidden; }
.full-player-modal.hidden { transform: translateY(100%); }
.fp-header { width: 100%; padding: 20px 0; display: flex; justify-content: center; flex-shrink: 0; }
.fp-close-btn { background: rgba(0,0,0,0.05); border: none; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--text-secondary); font-size: 16px; transition: background 0.2s; }
.fp-close-btn:hover { background: rgba(0,0,0,0.1); color: var(--text-primary); }
.fp-content { width: 100%; max-width: 380px; flex: 1; display: flex; flex-direction: column; justify-content: space-between; padding: 20px 32px 40px; }
.fp-cover-container { width: 100%; aspect-ratio: 1/1; max-height: 45vh; border-radius: 12px; box-shadow: 0 20px 40px rgba(0,0,0,0.2); overflow: hidden; background: #fafafa; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; }
.fp-cover { width: 100%; height: 100%; background-size: cover; background-position: center; background-color: #f0f0f5; }

/* 修复：全屏播放器信息栏布局，防止按钮被挤压 */
.fp-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; gap: 20px; }
.fp-text-mask {
flex: 1; overflow: hidden; display: flex; flex-direction: column; gap: 4px;
}
/* 跑马灯效果容器 */
.fp-text-inner {
overflow: hidden; white-space: nowrap; mask-image: linear-gradient(to right, transparent, black 2%, black 98%, transparent);
}
.scrolling-text {
display: inline-block; white-space: nowrap;
animation: scroll-text 15s linear infinite; /* 滚动动画 */
padding-left: 0;
}
/* 仅当文字较长时，animation生效 (实际上CSS无法自动检测，这里统一给一个较慢的移动，或者你可以选择text-overflow: ellipsis) */
/* 为了最好的效果，我们这里做一个简单的往复滚动或者单向滚动 */
@keyframes scroll-text {
0% { transform: translateX(0); }
20% { transform: translateX(0); } /* 停顿一会 */
100% { transform: translateX(-100%); }
}

.fp-text-inner h2 { font-size: 22px; font-weight: 700; color: var(--text-primary); margin: 0; }
.fp-text-inner p { font-size: 16px; color: var(--accent-color); font-weight: 500; margin: 0; }

.fp-btn-s {
background: #f2f2f7; border: none; color: var(--text-secondary); width: 32px; height: 32px;
border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;
flex-shrink: 0; /* 关键修复：禁止缩小 */
}

.fp-progress-container { width: 100%; margin-bottom: 20px; }
.fp-times { display: flex; justify-content: space-between; font-size: 10px; color: var(--text-secondary); margin-top: 8px; font-weight: 600; font-family: monospace; }
.fp-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.fp-main-ctrls { display: flex; align-items: center; gap: 30px; }
.fp-btn-m { background: none; border: none; font-size: 32px; color: var(--text-primary); cursor: pointer; }
.fp-btn-l { width: 70px; height: 70px; border-radius: 50%; background: var(--text-primary); color: #fff; border: none; font-size: 28px; cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; }
.fp-btn-l:hover { transform: scale(1.05); background: var(--accent-color); }
.fp-btn-s.active { color: var(--accent-color); background: rgba(250, 35, 59, 0.1); }

/* Queue & Modals remain same */
.queue-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 300; display: flex; flex-direction: column; transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); transform: translateY(0); }
.queue-modal.hidden { transform: translateY(100%); }
.queue-modal-header { padding: 20px 32px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--divider-color); background: #fff; flex-shrink: 0; }
.queue-modal-header h3 { font-size: 20px; font-weight: 700; }
.queue-modal-content { flex: 1; overflow-y: auto; padding-bottom: 40px; background: #fff; }
.queue-list-item { padding: 14px 32px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--divider-color); }
.queue-list-item.active { color: var(--accent-color); }
.queue-list-item.active .q-title { font-weight: 600; }
.q-title { font-size: 14px; font-weight: 500; }

.modal { background: rgba(0,0,0,0.4); backdrop-filter: blur(5px); position: fixed; inset: 0; z-index: 400; display: flex; align-items: flex-end; justify-content: center; opacity: 1; visibility: visible; transition: opacity 0.3s; }
.modal.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
.modal-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
.modal-content { background: #fff; width: 100%; max-width: 400px; border-radius: 16px 16px 0 0; box-shadow: 0 -10px 40px rgba(0,0,0,0.1); padding: 24px; z-index: 401; transform: translateY(0); transition: transform 0.3s; }
.modal.hidden .modal-content { transform: translateY(100%); }
.modal-content h3 { margin-bottom: 16px; font-size: 18px; font-weight: 700; text-align: center; }
.modal-content ul { list-style: none; margin-bottom: 20px; border-radius: 12px; overflow: hidden; background: #f2f2f7; }
.modal-content li { padding: 14px 16px; border-bottom: 1px solid #e5e5ea; cursor: pointer; display: flex; align-items: center; gap: 12px; font-size: 15px; color: var(--text-primary); }
.modal-content li:last-child { border: none; }
.modal-content li:hover { background: #e5e5ea; }
.btn-secondary { background: #f2f2f7; color: var(--accent-color); border: none; padding: 12px; border-radius: 12px; font-weight: 600; cursor: pointer; width: 100%; font-size: 15px; }
.btn-done { background: none; border: none; color: var(--accent-color); font-weight: 700; cursor: pointer; font-size: 16px; }

input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; cursor: pointer; }
input[type=range]:focus { outline: none; }
input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; background: #e5e5ea; border-radius: 2px; }
input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.2); margin-top: -6px; }

@media (max-width: 768px) {
.sidebar { display: none; }
.song-table-header, .song-item { grid-template-columns: 30px 30px 1fr 40px; padding: 12px 16px; }
.col-album, .col-time, .col-artist, .col-actions { display: none; }
.player-bar { padding: 0 16px; }
.player-extras { display: none; }
.player-info { width: 70%; }
.control-buttons .ctrl-btn:not(.play-pause-btn) { display: none; }
.fp-content { padding: 20px 24px 30px; }
}

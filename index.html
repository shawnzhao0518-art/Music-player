<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>macOS Sequoia Web</title>
    <style>
        /* --- ç³»ç»Ÿçº§ CSS å˜é‡ --- */
        :root {
            --bg-image: url('https://4kwallpapers.com/images/wallpapers/macos-sequoia-light-stock-6016x3384-15638.jpg');
            --dock-bg: rgba(255, 255, 255, 0.25);
            --window-bg: rgba(255, 255, 255, 0.85);
            --menu-bg: rgba(255, 255, 255, 0.35);
            --blur-strength: 25px;
            --shadow-active: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --shadow-inactive: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --font-stack: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
        }

        body {
            margin: 0;
            overflow: hidden;
            font-family: var(--font-stack);
            background: var(--bg-image) no-repeat center center fixed;
            background-size: cover;
            height: 100vh;
            user-select: none;
            cursor: default;
        }

        /* --- é¡¶éƒ¨èœå•æ  --- */
        .menubar {
            height: 28px;
            background: var(--menu-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 16px;
            color: #000;
            font-size: 13px;
            font-weight: 500;
            position: relative;
            z-index: 9999;
            box-shadow: 0 1px 5px rgba(0,0,0,0.05);
        }
        .menubar-left { display: flex; gap: 18px; }
        .menubar-right { display: flex; gap: 15px; }
        .apple-logo { font-size: 16px; margin-right: 4px; }

        /* --- çª—å£åŸºç¡€æ ·å¼ --- */
        .window {
            position: absolute;
            background: var(--window-bg);
            backdrop-filter: blur(var(--blur-strength));
            -webkit-backdrop-filter: blur(var(--blur-strength));
            border-radius: 12px;
            box-shadow: var(--shadow-active);
            border: 1px solid rgba(255, 255, 255, 0.4);
            display: none;
            flex-direction: column;
            overflow: hidden;
            transition: transform 0.15s, opacity 0.15s, width 0.2s, height 0.2s;
            animation: openWindow 0.3s cubic-bezier(0.19, 1, 0.22, 1);
        }
        
        .window.minimized {
            transform: scale(0) translateY(300px);
            opacity: 0;
            pointer-events: none;
        }

        @keyframes openWindow {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* --- çª—å£æ ‡é¢˜æ  --- */
        .title-bar {
            height: 38px;
            display: flex;
            align-items: center;
            padding-left: 12px;
            background: transparent;
            cursor: default; /* æ‹–æ‹½åŒºåŸŸ */
        }
        
        .traffic-lights {
            display: flex;
            gap: 8px;
            z-index: 10;
        }
        
        .traffic-light {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 8px;
            color: rgba(0,0,0,0.5);
            opacity: 1;
        }
        
        .traffic-lights:hover .traffic-light::after { content: ''; } /* ç®€åŒ–çš„hoverå ä½ */
        
        .close { background: #ff5f57; border: 1px solid #e0443e; }
        .minimize { background: #febc2e; border: 1px solid #dba52d; }
        .maximize { background: #28c840; border: 1px solid #1aab29; }

        /* é¼ æ ‡æ‚¬åœåœ¨çº¢ç»¿ç¯æ—¶æ˜¾ç¤ºç¬¦å· */
        .traffic-lights:hover .close::before { content: 'Ã—'; }
        .traffic-lights:hover .minimize::before { content: 'âˆ’'; }
        .traffic-lights:hover .maximize::before { content: '+'; }

        .window-content {
            flex: 1;
            position: relative;
            overflow: auto;
        }

        /* --- åº•éƒ¨ Dock æ  --- */
        .dock-wrapper {
            position: absolute;
            bottom: 10px;
            width: 100%;
            display: flex;
            justify-content: center;
            z-index: 10000;
        }
        
        .dock {
            background: var(--dock-bg);
            backdrop-filter: blur(var(--blur-strength));
            -webkit-backdrop-filter: blur(var(--blur-strength));
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 24px;
            padding: 8px;
            display: flex;
            gap: 12px;
            align-items: flex-end;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }

        .app-icon {
            width: 55px;
            height: 55px;
            border-radius: 14px;
            cursor: pointer;
            transition: transform 0.2s cubic-bezier(0.25, 1, 0.5, 1), margin-bottom 0.2s;
            position: relative;
            background-size: cover;
            background-color: #eee;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
        }

        .app-icon:hover {
            transform: scale(1.15) translateY(-10px);
            margin: 0 5px;
        }

        .app-icon::after {
            content: '';
            position: absolute;
            bottom: -15px;
            width: 4px;
            height: 4px;
            background: black;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .app-icon.active::after { opacity: 0.6; }

        /* --- åº”ç”¨ç‰¹å®šæ ·å¼ --- */
        
        /* è®°äº‹æœ¬ */
        .notepad-area {
            width: 100%;
            height: 100%;
            border: none;
            background: transparent;
            resize: none;
            padding: 15px;
            font-family: inherit;
            font-size: 16px;
            box-sizing: border-box;
            outline: none;
            color: #333;
            line-height: 1.5;
        }

        /* è®¡ç®—å™¨ */
        .calc-body {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1px;
            background: #d0d0d0; /* Grid lines color */
            height: 100%;
        }
        .calc-screen {
            grid-column: span 4;
            background: rgba(40,40,40,0.9);
            color: white;
            font-size: 40px;
            text-align: right;
            padding: 15px;
            font-weight: 300;
        }
        .calc-btn {
            border: none;
            background: rgba(255,255,255,0.9);
            font-size: 20px;
            cursor: pointer;
            padding: 20px 0;
        }
        .calc-btn:active { background: #ccc; }
        .calc-btn.orange { background: #ff9f0a; color: white; }
        .calc-btn.orange:active { background: #d78608; }
        .calc-btn.wide { grid-column: span 2; }

        /* æµè§ˆå™¨ */
        .browser-bar {
            height: 36px;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            padding: 0 10px;
            gap: 10px;
            border-bottom: 1px solid #ddd;
        }
        .url-input {
            flex: 1;
            border-radius: 6px;
            border: none;
            background: #dcdcdc;
            padding: 5px 10px;
            font-size: 13px;
            text-align: center;
            outline: none;
        }
        .url-input:focus { background: white; text-align: left; border: 2px solid #007aff; }

    </style>
</head>
<body>

    <div class="menubar">
        <div class="menubar-left">
            <span class="apple-logo">ï£¿</span>
            <span style="font-weight: 700;">Finder</span>
            <span>File</span>
            <span>Edit</span>
            <span>View</span>
            <span>Go</span>
            <span>Window</span>
            <span>Help</span>
        </div>
        <div class="menubar-right">
            <span>ğŸ”‹ 100%</span>
            <span>ğŸ“¶ Wi-Fi</span>
            <span>ğŸ”</span>
            <span>ğŸ›ï¸</span>
            <span id="clock">Mon Jun 22 9:41 AM</span>
        </div>
    </div>

    <div class="window" id="app-notes" style="width: 500px; height: 350px; top: 100px; left: 200px;">
        <div class="title-bar" onmousedown="startDrag(event, 'app-notes')">
            <div class="traffic-lights">
                <div class="traffic-light close" onclick="closeApp('app-notes')"></div>
                <div class="traffic-light minimize" onclick="minimizeApp('app-notes')"></div>
                <div class="traffic-light maximize" onclick="maximizeApp('app-notes')"></div>
            </div>
            <div style="flex:1; text-align: center; color: #555; font-size: 13px;">Notes</div>
        </div>
        <div class="window-content">
            <textarea id="note-content" class="notepad-area" placeholder="åœ¨è¿™é‡Œè¾“å…¥å†…å®¹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¿å­˜..."></textarea>
        </div>
    </div>

    <div class="window" id="app-calc" style="width: 260px; height: 360px; top: 150px; left: 300px;">
        <div class="title-bar" onmousedown="startDrag(event, 'app-calc')" style="background: #333;">
            <div class="traffic-lights">
                <div class="traffic-light close" onclick="closeApp('app-calc')"></div>
                <div class="traffic-light minimize" onclick="minimizeApp('app-calc')"></div>
                <div class="traffic-light maximize"></div>
            </div>
        </div>
        <div class="window-content" style="overflow: hidden;">
            <div class="calc-body">
                <div class="calc-screen" id="calc-display">0</div>
                <button class="calc-btn" onclick="calcInput('C')">AC</button>
                <button class="calc-btn" onclick="calcInput('+/-')">+/-</button>
                <button class="calc-btn" onclick="calcInput('%')">%</button>
                <button class="calc-btn orange" onclick="calcInput('/')">Ã·</button>
                <button class="calc-btn" onclick="calcInput('7')">7</button>
                <button class="calc-btn" onclick="calcInput('8')">8</button>
                <button class="calc-btn" onclick="calcInput('9')">9</button>
                <button class="calc-btn orange" onclick="calcInput('*')">Ã—</button>
                <button class="calc-btn" onclick="calcInput('4')">4</button>
                <button class="calc-btn" onclick="calcInput('5')">5</button>
                <button class="calc-btn" onclick="calcInput('6')">6</button>
                <button class="calc-btn orange" onclick="calcInput('-')">-</button>
                <button class="calc-btn" onclick="calcInput('1')">1</button>
                <button class="calc-btn" onclick="calcInput('2')">2</button>
                <button class="calc-btn" onclick="calcInput('3')">3</button>
                <button class="calc-btn orange" onclick="calcInput('+')">+</button>
                <button class="calc-btn wide" onclick="calcInput('0')">0</button>
                <button class="calc-btn" onclick="calcInput('.')">.</button>
                <button class="calc-btn orange" onclick="calcInput('=')">=</button>
            </div>
        </div>
    </div>

    <div class="window" id="app-safari" style="width: 800px; height: 500px; top: 80px; left: 150px;">
        <div class="title-bar" onmousedown="startDrag(event, 'app-safari')" style="background: #f0f0f0;">
            <div class="traffic-lights">
                <div class="traffic-light close" onclick="closeApp('app-safari')"></div>
                <div class="traffic-light minimize" onclick="minimizeApp('app-safari')"></div>
                <div class="traffic-light maximize" onclick="maximizeApp('app-safari')"></div>
            </div>
            <div style="flex:1;"></div>
        </div>
        <div class="browser-bar">
            <span style="cursor:pointer; font-size:18px;">ğŸ”™</span>
            <span style="cursor:pointer; font-size:18px;">ğŸ”œ</span>
            <input type="text" class="url-input" value="bing.com" id="browser-url" onkeydown="if(event.key === 'Enter') loadUrl()">
            <span style="cursor:pointer;">ğŸ”„</span>
        </div>
        <div class="window-content">
            <iframe id="browser-frame" src="https://www.bing.com" style="width:100%; height:100%; border:none;"></iframe>
        </div>
    </div>

    <div class="window" id="app-settings" style="width: 600px; height: 400px; top: 120px; left: 180px;">
        <div class="title-bar" onmousedown="startDrag(event, 'app-settings')">
            <div class="traffic-lights">
                <div class="traffic-light close" onclick="closeApp('app-settings')"></div>
                <div class="traffic-light minimize" onclick="minimizeApp('app-settings')"></div>
                <div class="traffic-light maximize"></div>
            </div>
            <div style="flex:1; text-align: center; color: #555; font-size: 13px;">System Settings</div>
        </div>
        <div class="window-content" style="background: #f5f5f7; display: flex;">
            <div style="width: 180px; border-right: 1px solid #ddd; padding: 10px;">
                <div style="padding: 5px 10px; background: #e3e3e3; border-radius: 5px;">Appearance</div>
                <div style="padding: 5px 10px;">Wallpaper</div>
                <div style="padding: 5px 10px;">Control Center</div>
            </div>
            <div style="flex: 1; padding: 20px; display: flex; justify-content: center; align-items: center;">
                <div style="text-align: center;">
                    <h2 style="margin-bottom: 10px;">macOS Sequoia</h2>
                    <p style="color: #888;">Web Edition v1.0</p>
                </div>
            </div>
        </div>
    </div>

    <div class="dock-wrapper">
        <div class="dock">
            <div class="app-icon" style="background: linear-gradient(#1c92d2, #f2fcfe);" onclick="alert('Finder å³å°†æ¨å‡º')">ğŸ˜Š</div>
            <div class="app-icon" id="dock-safari" style="background: white;" onclick="openApp('app-safari')">ğŸ§­</div>
            <div class="app-icon" id="dock-notes" style="background: linear-gradient(to bottom, #ffe873, #ffcd00);" onclick="openApp('app-notes')">ğŸ“</div>
            <div class="app-icon" id="dock-settings" style="background: #bbb;" onclick="openApp('app-settings')">âš™ï¸</div>
            <div class="app-icon" id="dock-calc" style="background: #333; color: white;" onclick="openApp('app-calc')">ğŸ§®</div>
            <div class="app-icon" style="background: #2c2c32; color: #007acc;" onclick="window.open('https://github.com', '_blank')">ğŸ’»</div>
        </div>
    </div>

    <script>
        // --- 1. ç³»ç»Ÿæ—¶é’Ÿ ---
        function updateClock() {
            const now = new Date();
            const options = { weekday: 'short', month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit' };
            document.getElementById('clock').innerText = now.toLocaleDateString('en-US', options);
        }
        setInterval(updateClock, 1000);
        updateClock();

        // --- 2. çª—å£ç®¡ç†ç³»ç»Ÿ (Core OS Logic) ---
        let maxZIndex = 100;
        let activeWindow = null;

        function openApp(appId) {
            const win = document.getElementById(appId);
            const dockIcon = document.getElementById(appId.replace('app-', 'dock-'));
            
            // åŠ¨ç”»é‡ç½®
            win.style.display = 'flex';
            requestAnimationFrame(() => {
                win.classList.remove('minimized');
            });
            
            bringToFront(win);
            
            // æ ‡è®° Dock çŠ¶æ€
            if(dockIcon) dockIcon.classList.add('active');
        }

        function closeApp(appId) {
            const win = document.getElementById(appId);
            win.style.display = 'none'; // ç®€å•å…³é—­
            // å®é™… Mac å…³é—­çª—å£ä¸ä¸€å®šé€€å‡º Appï¼Œä½† Web ç‰ˆç®€åŒ–å¤„ç†
            const dockIcon = document.getElementById(appId.replace('app-', 'dock-'));
            if(dockIcon) dockIcon.classList.remove('active');
        }

        function minimizeApp(appId) {
            const win = document.getElementById(appId);
            win.classList.add('minimized');
        }

        function maximizeApp(appId) {
            const win = document.getElementById(appId);
            if (win.style.width === '100%') {
                // è¿˜åŸ (è¿™åªæ˜¯ä¸ªç®€å•çš„è¿˜åŸé€»è¾‘ï¼Œå®é™…éœ€è¦è®°å½•ä¸Šæ¬¡ä½ç½®)
                win.style.width = '600px'; 
                win.style.height = '400px';
                win.style.top = '100px';
                win.style.left = '100px';
            } else {
                win.style.width = '100%';
                win.style.height = 'calc(100vh - 60px)'; // å‡å» Dock å’Œ Menu
                win.style.top = '28px'; // Menu height
                win.style.left = '0';
            }
        }

        function bringToFront(element) {
            maxZIndex++;
            element.style.zIndex = maxZIndex;
            activeWindow = element;
        }

        // ç‚¹å‡»çª—å£ä»»æ„ä½ç½®ç½®é¡¶
        document.querySelectorAll('.window').forEach(win => {
            win.addEventListener('mousedown', () => bringToFront(win));
        });

        // --- 3. å®Œç¾æ‹–æ‹½é€»è¾‘ (æ— å¡é¡¿) ---
        let isDragging = false;
        let currentDragWin = null;
        let offset = { x: 0, y: 0 };

        function startDrag(e, id) {
            e.preventDefault(); // é˜²æ­¢é€‰ä¸­æ–‡å­—
            isDragging = true;
            currentDragWin = document.getElementById(id);
            bringToFront(currentDragWin);
            
            const rect = currentDragWin.getBoundingClientRect();
            offset.x = e.clientX - rect.left;
            offset.y = e.clientY - rect.top;
            
            document.addEventListener('mousemove', onDrag);
            document.addEventListener('mouseup', stopDrag);
        }

        function onDrag(e) {
            if (!isDragging) return;
            
            let x = e.clientX - offset.x;
            let y = e.clientY - offset.y;
            
            // è¾¹ç•Œæ£€æŸ¥ (é˜²æ­¢æ‹–å‡ºå±å¹•å¤ªè¿œ)
            if (y < 28) y = 28; // ä¸èƒ½æŒ¡ä½èœå•æ 
            
            currentDragWin.style.left = x + 'px';
            currentDragWin.style.top = y + 'px';
        }

        function stopDrag() {
            isDragging = false;
            currentDragWin = null;
            document.removeEventListener('mousemove', onDrag);
            document.removeEventListener('mouseup', stopDrag);
        }

        // --- 4. åº”ç”¨é€»è¾‘ ---

        // è®¡ç®—å™¨é€»è¾‘
        let calcVal = '0';
        function calcInput(val) {
            const display = document.getElementById('calc-display');
            if (val === 'C') {
                calcVal = '0';
            } else if (val === '=') {
                try {
                    calcVal = eval(calcVal).toString();
                } catch {
                    calcVal = 'Error';
                }
            } else {
                if (calcVal === '0') calcVal = val;
                else calcVal += val;
            }
            display.innerText = calcVal;
        }

        // è®°äº‹æœ¬è‡ªåŠ¨ä¿å­˜ (LocalStorage)
        const noteArea = document.getElementById('note-content');
        if(localStorage.getItem('macOS_Note')) {
            noteArea.value = localStorage.getItem('macOS_Note');
        }
        noteArea.addEventListener('input', () => {
            localStorage.setItem('macOS_Note', noteArea.value);
        });

        // æµè§ˆå™¨é€»è¾‘
        function loadUrl() {
            let url = document.getElementById('browser-url').value;
            if(!url.startsWith('http')) url = 'https://' + url;
            document.getElementById('browser-frame').src = url;
        }

    </script>
</body>
</html>
